# üöÄ Guia de Deploy - Nola God Level

## Op√ß√µes de Deploy

### 1. Vercel (Recomendado para MVP/R√°pido)

#### Pr√©-requisitos
- Conta no [Vercel](https://vercel.com)
- Conta no [Supabase](https://supabase.com) ou [Railway](https://railway.app) para PostgreSQL

#### Passos para Deploy

1. **Configurar Banco de Dados**
   ```bash
   # No Supabase/Railway, crie um banco PostgreSQL
   # Execute o script database-schema.sql no banco
   ```

2. **Deploy no Vercel**
   ```bash
   # Instalar Vercel CLI
   npm install -g vercel

   # Login no Vercel
   vercel login

   # Deploy
   vercel --prod
   ```

3. **Configurar Environment Variables no Vercel**
   - `DATABASE_URL`: URL do seu banco PostgreSQL
   - `JWT_SECRET`: Chave secreta para JWT (gere uma segura)

4. **Acesso**
   - Frontend: `https://seu-projeto.vercel.app`
   - API: `https://seu-projeto.vercel.app/api/`

### 2. Heroku

#### Pr√©-requisitos
- Conta no [Heroku](https://heroku.com)
- Heroku CLI instalado

#### Passos
```bash
# Login no Heroku
heroku login

# Criar app
heroku create nola-god-level

# Adicionar PostgreSQL
heroku addons:create heroku-postgresql:hobby-dev

# Configurar vari√°veis
heroku config:set JWT_SECRET=your-secret-key

# Deploy
git push heroku main
```

### 3. Digital Ocean App Platform

#### Pr√©-requisitos
- Conta na [Digital Ocean](https://digitalocean.com)

#### Passos
1. Conectar reposit√≥rio GitHub
2. Configurar app spec:
   ```yaml
   name: nola-god-level
   services:
   - name: backend
     source_dir: backend
     github:
       repo: seu-user/nola-god-level
     run_command: npm start
     environment_slug: node-js
     instance_count: 1
     instance_size_slug: basic-xxs
     envs:
     - key: DATABASE_URL
       value: ${database.DATABASE_URL}
     - key: JWT_SECRET
       value: your-secret-key

   databases:
   - name: database
     engine: PG
     version: "14"
     size: basic
   ```

### 4. AWS (Produ√ß√£o Completa)

#### Servi√ßos Necess√°rios
- **EC2** ou **ECS** para aplica√ß√£o
- **RDS PostgreSQL** para banco
- **CloudFront** + **S3** para frontend
- **API Gateway** + **Lambda** para serverless

#### Passos B√°sicos
1. Criar VPC e subnets
2. Configurar RDS PostgreSQL
3. Deploy backend no ECS
4. Deploy frontend no S3 + CloudFront

## üîß Configura√ß√£o do Banco de Dados

### Op√ß√µes de PostgreSQL na Nuvem

#### Supabase (Recomendado)
```sql
-- Execute no SQL Editor do Supabase
-- Cole o conte√∫do do database-schema.sql
```

#### Railway
```bash
# Conectar via Railway CLI
railway connect

# Executar schema
psql $DATABASE_URL -f database-schema.sql
```

#### PlanetScale ou Neon
- Importar o `database-schema.sql`
- Ajustar tipos se necess√°rio (MySQL vs PostgreSQL)

## üåê Configura√ß√£o de Dom√≠nio

### Vercel
```bash
# Adicionar dom√≠nio customizado
vercel domains add seu-dominio.com
```

### Outros
- Configurar DNS para apontar para o servi√ßo
- Adicionar SSL/TLS

## üîí Seguran√ßa

### Vari√°veis de Ambiente
```env
DATABASE_URL=postgresql://user:pass@host:5432/db
JWT_SECRET=chave-secreta-muito-forte
NODE_ENV=production
```

### CORS
- Configurar origens permitidas em produ√ß√£o
- Usar HTTPS sempre

## üìä Monitoramento

### Vercel Analytics
- Autom√°tico no Vercel
- M√©tricas de performance

### Sentry para Error Tracking
```bash
npm install @sentry/react @sentry/tracing
```

### Logs
- Vercel: Dashboard de logs
- Heroku: `heroku logs --tail`
- AWS: CloudWatch

## üöÄ Otimiza√ß√£o

### Frontend
```bash
# Build otimizado
npm run build

# Analisar bundle
npm install -g webpack-bundle-analyzer
npx webpack-bundle-analyzer build/static/js/*.js
```

### Backend
- Connection pooling para PostgreSQL
- Cache com Redis (opcional)
- Rate limiting

## üîÑ CI/CD

### GitHub Actions (Exemplo)
```yaml
name: Deploy to Vercel
on:
  push:
    branches: [ main ]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
```

## üß™ Testes em Produ√ß√£o

### Checklist Pr√©-Deploy
- [ ] Banco de dados configurado
- [ ] Environment variables setadas
- [ ] Build passando localmente
- [ ] Testes executando
- [ ] CORS configurado
- [ ] HTTPS habilitado

### P√≥s-Deploy
- [ ] Frontend carregando
- [ ] API endpoints respondendo
- [ ] Login funcionando
- [ ] Dados carregando
- [ ] Performance aceit√°vel

## üÜò Troubleshooting

### Problemas Comuns

#### Erro de CORS
```javascript
// Adicionar no backend
app.use(cors({
  origin: process.env.FRONTEND_URL || 'http://localhost:3000',
  credentials: true
}));
```

#### Database Connection
```javascript
// Verificar connection string
const { Pool } = require('pg');
const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: { rejectUnauthorized: false }
});
```

#### Build Falhando
```bash
# Limpar cache
rm -rf node_modules package-lock.json
npm install
npm run build
```

## üìû Suporte

Para d√∫vidas sobre deploy:
- Vercel Docs: https://vercel.com/docs
- Supabase Docs: https://supabase.com/docs
- Railway Docs: https://docs.railway.app
